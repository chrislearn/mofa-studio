<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
</head>

<body>
    <div class="mermaid">
        flowchart TB
  doubao-asr["**doubao-asr**"]
  doubao-tts["**doubao-tts**"]
  english-teacher["**english-teacher**"]
  grammar-checker["**grammar-checker**"]
  mofa-audio-input[\"**mofa-audio-input**"/]
  mofa-audio-player["**mofa-audio-player**"]
  mofa-chat-display["**mofa-chat-display**"]
  mofa-system-log[/"**mofa-system-log**"\]
  mofa-text-input[\"**mofa-text-input**"/]
  report-storage["**report-storage**"]
  session-controller["**session-controller**"]
  user-input-merger["**user-input-merger**"]
  mofa-audio-input -- audio --> doubao-asr
  english-teacher -- text --> doubao-tts
  grammar-checker -- analysis --> english-teacher
  session-controller -- control --> english-teacher
  user-input-merger -- user_text as text --> english-teacher
  user-input-merger -- user_text --> grammar-checker
  doubao-tts -- audio --> mofa-audio-player
  session-controller -- control --> mofa-audio-player
  english-teacher -- text as ai_text --> mofa-chat-display
  grammar-checker -- analysis --> mofa-chat-display
  user-input-merger -- user_text --> mofa-chat-display
  doubao-asr -- log as asr_log --> mofa-system-log
  doubao-asr -- status as asr_status --> mofa-system-log
  mofa-audio-player -- log as audio_player_log --> mofa-system-log
  mofa-audio-player -- status as audio_status --> mofa-system-log
  grammar-checker -- log as grammar_log --> mofa-system-log
  grammar-checker -- status as grammar_status --> mofa-system-log
  report-storage -- log as storage_log --> mofa-system-log
  report-storage -- status as storage_status --> mofa-system-log
  english-teacher -- log as teacher_log --> mofa-system-log
  english-teacher -- status as teacher_status --> mofa-system-log
  doubao-tts -- log as tts_log --> mofa-system-log
  doubao-tts -- status as tts_status --> mofa-system-log
  grammar-checker -- analysis --> report-storage
  session-controller -- control --> report-storage
  grammar-checker -- analysis --> session-controller
  mofa-audio-player -- audio_complete --> session-controller
  mofa-text-input -- control as user_input --> session-controller
  doubao-asr -- text as asr_text --> user-input-merger
  session-controller -- control as reset --> user-input-merger
  mofa-text-input -- text as text_input --> user-input-merger

    </div>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({ startOnLoad: true, securityLevel: 'loose', theme: 'base' });
    </script>
</body>

</html>
